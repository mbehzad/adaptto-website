{"version":3,"file":"talk-detail-after-outline-063db410.js","sources":["../blocks/talk-detail-after-outline/talk-detail-after-outline.js"],"sourcesContent":["import { append } from '../../scripts/utils/dom.js';\nimport { createOptimizedPicture, getMetadata } from '../../scripts/lib-franklin.js';\nimport { getQueryIndex } from '../../scripts/services/QueryIndex.js';\nimport { parseCSVArray } from '../../scripts/utils/metadata.js';\nimport { getSiteRootPath, getSpeakerDetailPath } from '../../scripts/utils/site.js';\nimport { decorateAnchors } from '../../scripts/services/LinkHandler.js';\n\n/**\n * List talk speakers.\n * @typedef {import('../../scripts/services/QueryIndex').default} QueryIndex\n * @param {Element} parent\n * @param {string} siteRootPath\n * @param {QueryIndex} queryIndex\n */\nfunction buildSpeakers(parent, siteRootPath, queryIndex) {\n  const speakers = parseCSVArray(getMetadata('speakers'))\n    .map((speaker) => queryIndex.getSpeaker(speaker, siteRootPath))\n    .filter((speakerItem) => speakerItem !== undefined);\n  if (speakers.length === 0) {\n    return;\n  }\n\n  append(parent, 'h4').textContent = 'Speakers';\n  const ul = append(parent, 'ul', 'speakers');\n  speakers.forEach((speakerItem) => {\n    const li = append(ul, 'li');\n    const speakerUrl = getSpeakerDetailPath(speakerItem, siteRootPath);\n\n    const imageAnchor = append(li, 'a');\n    imageAnchor.href = speakerUrl;\n    if (speakerItem.image) {\n      imageAnchor.append(createOptimizedPicture(\n        speakerItem.image,\n        speakerItem.title,\n        false,\n        [{ width: '150' }],\n      ));\n    } else {\n      const img = append(imageAnchor, 'img');\n      img.src = '/resources/img/speaker_placeholder.svg';\n    }\n\n    const a = append(li, 'a');\n    a.href = speakerUrl;\n    a.textContent = speakerItem.title;\n\n    if (speakerItem.affiliation) {\n      li.append(`, ${speakerItem.affiliation}`);\n    }\n  });\n}\n\n/**\n * Build link item.\n * @param {Element} ul\n * @param {string} className\n * @param {string} href\n * @param {string} title\n */\nfunction buildLinkItem(ul, className, href, title) {\n  if (!href) {\n    return;\n  }\n  const li = append(ul, 'li', className);\n  const a = append(li, 'a');\n  a.href = href;\n  a.textContent = title;\n}\n\n/**\n * List talk presentation download and other links.\n * @param {Element} parent\n */\nfunction buildLinks(parent) {\n  const presentationLink = getMetadata('presentation');\n  const sourceCodeLink = getMetadata('source-code');\n  const videoLink = getMetadata('video-link');\n  if (!presentationLink && !sourceCodeLink && !videoLink) {\n    return;\n  }\n\n  const ul = append(parent, 'ul', 'talk-links');\n  buildLinkItem(ul, 'download', presentationLink, 'Presentation download');\n  buildLinkItem(ul, 'code', sourceCodeLink, 'Source code');\n  buildLinkItem(ul, 'video', videoLink, 'Video');\n  decorateAnchors(parent);\n}\n\n/**\n * Talk detail after outline: speakers and links.\n * @param {Element} block\n */\nexport default async function decorate(block) {\n  const siteRootPath = getSiteRootPath(window.location.pathname);\n  const queryIndex = await getQueryIndex();\n\n  buildSpeakers(block, siteRootPath, queryIndex);\n  buildLinks(block);\n}\n"],"names":["buildLinkItem","ul","className","href","title","li","append","a","textContent","async","decorate","block","parent","siteRootPath","queryIndex","speakers","parseCSVArray","getMetadata","map","speaker","getSpeaker","filter","speakerItem","undefined","length","forEach","speakerUrl","getSpeakerDetailPath","imageAnchor","image","createOptimizedPicture","width","src","affiliation","buildSpeakers","getSiteRootPath","window","location","pathname","getQueryIndex","presentationLink","sourceCodeLink","videoLink","decorateAnchors","buildLinks"],"mappings":"kFA2DA,SAASA,EAAcC,EAAIC,EAAWC,EAAMC,GAC1C,IAAKD,EACH,OAEF,MAAME,EAAKC,EAAOL,EAAI,KAAMC,GACtBK,EAAID,EAAOD,EAAI,KACrBE,EAAEJ,KAAOA,EACTI,EAAEC,YAAcJ,CAClB,CAyBeK,eAAeC,EAASC,IA9EvC,SAAuBC,EAAQC,EAAcC,GAC3C,MAAMC,EAAWC,EAAcC,EAAY,aACxCC,KAAKC,GAAYL,EAAWM,WAAWD,EAASN,KAChDQ,QAAQC,QAAgCC,IAAhBD,IAC3B,GAAwB,IAApBP,EAASS,OACX,OAGFlB,EAAOM,EAAQ,MAAMJ,YAAc,WACnC,MAAMP,EAAKK,EAAOM,EAAQ,KAAM,YAChCG,EAASU,SAASH,IAChB,MAAMjB,EAAKC,EAAOL,EAAI,MAChByB,EAAaC,EAAqBL,EAAaT,GAE/Ce,EAActB,EAAOD,EAAI,KAC/BuB,EAAYzB,KAAOuB,EACfJ,EAAYO,MACdD,EAAYtB,OAAOwB,EACjBR,EAAYO,MACZP,EAAYlB,OACZ,EACA,CAAC,CAAE2B,MAAO,UAGAzB,EAAOsB,EAAa,OAC5BI,IAAM,yCAGZ,MAAMzB,EAAID,EAAOD,EAAI,KACrBE,EAAEJ,KAAOuB,EACTnB,EAAEC,YAAcc,EAAYlB,MAExBkB,EAAYW,aACd5B,EAAGC,OAAO,KAAKgB,EAAYW,cAC5B,GAEL,CA8CEC,CAAcvB,EAHOwB,EAAgBC,OAAOC,SAASC,gBAC5BC,KArB3B,SAAoB3B,GAClB,MAAM4B,EAAmBvB,EAAY,gBAC/BwB,EAAiBxB,EAAY,eAC7ByB,EAAYzB,EAAY,cAC9B,IAAKuB,IAAqBC,IAAmBC,EAC3C,OAGF,MAAMzC,EAAKK,EAAOM,EAAQ,KAAM,cAChCZ,EAAcC,EAAI,WAAYuC,EAAkB,yBAChDxC,EAAcC,EAAI,OAAQwC,EAAgB,eAC1CzC,EAAcC,EAAI,QAASyC,EAAW,SACtCC,EAAgB/B,EAClB,CAWEgC,CAAWjC,EACb"}