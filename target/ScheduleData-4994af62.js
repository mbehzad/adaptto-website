import{b as t,h as e,i as a,j as n,k as s,m as r}from"./scripts-044ccee4.js";const i="en-GB",o={hour:"2-digit",minute:"2-digit",timeZone:"UTC"},c={dateStyle:"full"};function d(t){return t.toLocaleDateString(i,c)}function u(t){return t.toLocaleTimeString(i,o)}function l(t){const e=new Date(0);return e.setUTCMilliseconds(Math.round(86400*(t-25569)*1e3)),e}class y{day;start;end;entries}class p{day;track;start;end;title;duration;durationFAQ;type;speakers;talkPath}const f=["day","talk","break","other"];class h{days;constructor(t){this.days=t}getDays(){return this.days}getTalkEntry(t){return this.days.flatMap((t=>t.entries)).find((e=>e.talkPath===t))}}function k(t,e){const i=parseInt(t.Day,10)||0,o=parseInt(t.Track,10)||0,c=parseFloat(t.Start)||0,d=parseFloat(t.End)||0;let u=t.Entry;const y=parseInt(t.Duration,10)||0,h=parseInt(t.FAQ,10)||0,k=t.Type;let g=a(t.Speakers);if(0===i||0===c||0===d||!u||0===y||!f.includes(k))return;const m=l(c),w=l(d);let F;if("talk"===k){const t=function(t,e,a){let n;return n=s(t)?r(t):`/${e}/schedule/${t}`,a.getItem(n)}(u,m.getFullYear(),e);if(!t)return;F=t.path,u=n(t.title),0===g.length&&(g=t.getSpeakers())}return Object.assign(new p,{day:i,track:o,start:m,end:w,title:u,duration:y,durationFAQ:h,type:k,speakers:g,talkPath:F})}async function g(a){let n;const s=await fetch(a,t());if(s.ok){n=(await s.json()).data}const r=function(t,e){const a=new Map;return t.forEach((t=>{const n=k(t,e);if(n&&"day"!==n.type){let t=a.get(n.day);t||(t=[],a.set(n.day,t)),t.push(n)}})),Array.from(a.values()).map((t=>Object.assign(new y,{day:t[0].day,start:t.reduce(((t,e)=>e.start<t?e.start:t),t[0].start),end:t.reduce(((t,e)=>e.end>t?e.end:t),t[0].start),entries:t})))}(n||[],await e());return new h(r)}export{u as a,d as f,g};
