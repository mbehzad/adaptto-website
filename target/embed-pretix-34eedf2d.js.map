{"version":3,"file":"embed-pretix-34eedf2d.js","sources":["../blocks/embed-pretix/embed-pretix.js"],"sourcesContent":["import { readBlockConfig } from '../../scripts/lib-franklin.js';\nimport html from '../../scripts/utils/htmlTemplateTag.js';\nimport { append } from '../../scripts/utils/dom.js';\nimport { decorateWithConsent } from '../../scripts/utils/usercentrics.js';\n\n/**\n * Embed Pretix Ticket Shop.\n * @param {Element} block\n */\nexport default function decorate(block) {\n  const config = readBlockConfig(block);\n  const shopUrl = config['shop-url'];\n  const shopCssUrl = config['shop-css-url'];\n  const scriptUrl = config['script-url'];\n\n  if (shopUrl && shopCssUrl && scriptUrl) {\n    block.innerHTML = '';\n\n    const p = append(block, 'p');\n    p.innerHTML = html`Direct link to <a href=\"${shopUrl}\" target=\"_blank\">adaptTo() Ticket Shop</a>.`;\n\n    const div = append(block, 'div');\n\n    decorateWithConsent('pretix', div, (parent) => {\n      // add pretix script to HTML head\n      const script = document.createElement('script');\n      script.src = scriptUrl;\n      script.type = 'text/javascript';\n      script.onload = () => {\n        parent.innerHTML = html`\n          <link rel=\"stylesheet\" type=\"text/css\" href=\"${shopCssUrl}\">\n          <pretix-widget event=\"${shopUrl}\"></pretix-widget>\n        `;\n      };\n      document.head.append(script);\n    });\n  }\n}\n"],"names":["decorate","block","config","readBlockConfig","shopUrl","shopCssUrl","scriptUrl","innerHTML","append","html","div","decorateWithConsent","parent","script","document","createElement","src","type","onload","head"],"mappings":"yIASe,SAASA,EAASC,GAC/B,MAAMC,EAASC,EAAgBF,GACzBG,EAAUF,EAAO,YACjBG,EAAaH,EAAO,gBACpBI,EAAYJ,EAAO,cAEzB,GAAIE,GAAWC,GAAcC,EAAW,CACtCL,EAAMM,UAAY,GAERC,EAAOP,EAAO,KACtBM,UAAYE,CAAI,2BAA2BL,gDAE7C,MAAMM,EAAMF,EAAOP,EAAO,OAE1BU,EAAoB,SAAUD,GAAME,IAElC,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,IAAMV,EACbO,EAAOI,KAAO,kBACdJ,EAAOK,OAAS,KACdN,EAAOL,UAAYE,CAAI;yDAC0BJ;kCACvBD;SACzB,EAEHU,SAASK,KAAKX,OAAOK,EAAO,GAE/B,CACH"}